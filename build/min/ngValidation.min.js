"use strict";angular.module("ng-validation",[]).factory("ngValidation",["ngValidationRules","ngValidationScenarios",function(a,b){var c=function(b,c){if(c=c||!1,a=a||function(){throw"ngValidation: Dont forget to source the angular-validate-rules file in the DOM!"}(),this.defaults={rule:a.default.rule,async:!1,passed_toggle:"passed-validation",failed_toggle:"failed-validation",show_failed_elements:!0,show_passed_elements:!0,show_passed_on_load:!1,show_failed_on_load:!1,groups:!1,group_toggle:"ng-validation-group",exempt:[],on_load:function(){},ele_fail:function(){},ele_success:function(){},instance_fail:function(){},instance_success:function(){},submit_fail:function(){},submit_success:function(){},validator:!1,submit:!1,submit_toggle:"disabled",scenarios:!1,events:{keydown:["text","password","email","textarea","tel"],keyup:["text","password","email","textarea","tel"],click:["submit","checkbox","radio"],change:["checkbox","radio","select"],paste:["text","password","email","textarea","tel"],blur:["text","password","email","textarea","tel"],mouseenter:[],mouseleave:[]},ignore:["header","div","section","p","ul","li","article","aside","video","audio","h1","h2","h3","h4","h5","h6","hr","span","label","fieldset","legend"]},this.opts=c?this.extend(this.defaults,c):this.defaults,this.vChunk=b,this.pt=this.opts.passed_toggle,this.ft=this.opts.failed_toggle,this.spe=this.opts.show_passed_elements,this.sfe=this.opts.show_failed_elements,this.sfol=this.opts.show_failed_on_load,this.spol=this.opts.show_passed_on_load,this.opts.rule||(console.warn("ngValidation: rule was declared in DOM but not found in angular-validate-rules.js. Falling back to default rule"),this.opts.rule=a.default.rule),this.required=[],this.exempt=[],this.failed=[],this.groups_failed=[],this.loadState=1,this.loadStates={1:"Not Loaded",2:"Loaded"},this.opts.submit)this.sbmt=this.opts.submit;else if(b.querySelectorAll("input[type=submit]").length>0)this.sbmt=b.querySelectorAll("input[type=submit]")[0];else if(b.querySelectorAll("button[type=submit]").length>0)this.sbmt=b.querySelectorAll("button[type=submit]")[0];else if(!this.opts.async)throw"ngValidation: No submit button found and Async mode disabled, are you sure you need validation?";return this.pre_validate(),this};c.prototype.pre_validate=function(){var a=this;if(this.process_exempt(this.opts.exempt),this.opts.groups?this.process_groups():"",this.process_required(this.vChunk),this.sbmt.addEventListener("click",function(b){a.post_validate.call(a,this,b)},!1),this.opts.scenarios)for(var c=0,d=this.opts.scenarios.length;d>c;c++)new b([this.opts.scenarios[c].name],this.vChunk,this.opts.scenarios[c].options,this);this.opts.on_load.call(this),this.required.forEach(function(b,c){a.validate.call(a,b,c)})},c.prototype.process_exempt=function(a){for(var b=[],c=0;c<a.length;c++)if(this.vChunk.querySelectorAll(a[c]).length>0){b=this.vChunk.querySelectorAll(a[c]);for(var d=0;d<b.length;d++)this.exempt.push(b[d])}},c.prototype.process_groups=function(){for(var a,b,c=this,d=this.opts.groups,e=0,f=d.length;f>e;e++)if(d[e].passed=[],d[e].container&&void 0!==d[e].container){if(a=this.vChunk.querySelectorAll(d[e].container),a.length>0)for(var g=0,h=a.length;h>g;g++)if(a[g].setAttribute(this.opts.group_toggle,d[e].name),d[e].required){b=a[g].querySelectorAll(d[e].required);for(var i=0,j=b.length;j>i;i++)this.bind_selectors(b[i],c.group_validate,d[e],c),1===b[i].nodeType&&this.group_validate(b[i],d[e])}else for(var i=0,j=a[g].childNodes.length;j>i;i++)this.bind_selectors(a[g].childNodes[i],c.group_validate,d[e],c),1===a[g].childNodes[i].nodeType&&this.group_validate(a[g].childNodes[i],d[e])}else{if(!d[e].required)throw"No elements in group to parse. Please specify a container or required elements.";a=this.vChunk.querySelectorAll(d[e].required);for(var g=0,h=a.length;h>g;g++)a[g].setAttribute(this.opts.group_toggle,d[e].name),this.bind_selectors(a[g],c.group_validate,d[e],c),1===a[g].nodeType&&this.group_validate(a[g],d[e])}},c.prototype.process_required=function(a){for(var b=this,c=0;c<a.childNodes.length;c++)1!==a.childNodes[c].nodeType||-1!==this.exempt.indexOf(a.childNodes[c])||a.childNodes[c]===this.sbmt||a.childNodes[c].hasAttribute(this.opts.group_toggle)||(-1===this.opts.ignore.indexOf(a.childNodes[c].localName)&&this.required.push(a.childNodes[c]),this.bind_selectors(a.childNodes[c],b.validate,"",b),this.process_required(a.childNodes[c]))},c.prototype.bind_selectors=function(a,b,c,d){for(var e in this.opts.events)if(this.opts.events[e]!==!1)for(var f=0;f<this.opts.events[e].length;f++)void 0!==a&&a.type===this.opts.events[e][f]&&a.addEventListener(e,function(a){("keydown"!==a.type||"keydown"===a.type&&8===a.keyCode||46===a.keyCode)&&b.call(d,this,c,a)},!1)},c.prototype.validate=function(a,b,c){var d=this.validators[a.type]?a.type:"text";a=a||{},this.validators[d]&&this.validators[d].call(this,a)?this.opts.validator[a.type]?this.opts.validator[a.type].call(this,a,b,c)?this.epic_win(a,!1,c):this.epic_fail(a,!1,c):this.epic_win(a,!1,c):this.epic_fail(a,!1,c),"number"==typeof b&&b===this.required.length-1&&(this.loadState=2)},c.prototype.group_validate=function(a,b,c){var d=this.validators[a.type]?a.type:"text";if(c=c||{},!this.validators[d])throw"ngValidation: specified and fallback validtor not found. Hmmmm, this shouldn't happen.";this.validators[d](a,c)?this.opts.validator[a.type]?this.opts.validator[a.type].call(this,a,c)?(-1===b.passed.indexOf(a)&&b.passed.push(a),this.epic_win(a,!0,c)):(-1!==b.passed.indexOf(a)&&b.passed.splice(b.passed.indexOf(a),1),this.epic_fail(a,!0,c)):(-1===b.passed.indexOf(a)&&b.passed.push(a),this.epic_win(a,!0,c)):(-1!==b.passed.indexOf(a)&&b.passed.splice(b.passed.indexOf(a),1),this.epic_fail(a,!0,c)),b.passed.length>=b.number_required?-1!==this.groups_failed.indexOf(b.name)&&this.groups_failed.splice(this.groups_failed.indexOf(b.name),1):-1===this.groups_failed.indexOf(b.name)&&this.groups_failed.push(b.name)},c.prototype.epic_win=function(a,b,c){b||this.total_passed(a),(-1!==this.required.indexOf(a)||b)&&(2===this.loadState||this.spol&&1===this.loadState)&&(this.spe&&a.classList.add(this.pt),a.classList.remove(this.ft),this.opts.ele_success.call(this,a,c)),this.instance_rule(a,c)},c.prototype.epic_fail=function(a,b,c){b||this.total_failed(a),(-1!==this.required.indexOf(a)||b)&&(2===this.loadState||this.sfol&&1===this.loadState)&&(this.sfe&&a.classList.add(this.ft),a.classList.remove(this.pt),this.opts.ele_fail.call(this,a,c)),this.instance_rule(a,c)},c.prototype.instance_rule=function(a,b){a=a||[],b=b||{},this.opts.rule&&(this.opts.rule.call(this,this.vChunk,a,b)?(this.sbmt.removeAttribute(this.opts.submit_toggle),this.opts.instance_success.call(this,this.vChunk)):(this.sbmt.setAttribute(this.opts.submit_toggle,!0),this.opts.instance_fail.call(this,this.vChunk)))},c.prototype.post_validate=function(a,b){return this.opts.async?void 0:a.hasAttribute(this.opts.submit_toggle)?(this.opts.submit_fail.call(this),b.preventDefault(),!1):(this.opts.submit_success.call(this),!0)},c.prototype.total_failed=function(a){-1===this.failed.indexOf(a)&&this.failed.push(a)},c.prototype.total_passed=function(a){-1!==this.failed.indexOf(a)&&this.failed.splice(this.failed.indexOf(a),1)},c.prototype.extend=function(a,b){return function c(a,b){for(var d in b)"object"==typeof a[d]?c(a[d],b[d]):a[d]=b[d]}(a,b),a},c.prototype.validators={text:function(a){var b=a.value;return""!==b&&void 0!==b&&null!==b?!0:!1},email:function(a){var b=a.value;return""!==b&&void 0!==b&&null!==b?b.match(/^[\w\-\+_]+(\.[\w\-\+_]+)*\@[\w\-\+_]+\.[\w\-\+_]+(\.[\w\-\+_]+)*/i)?!0:!1:!1},password:function(a){var b=a.value;return""!==b&&void 0!==b&&null!==b?!0:!1},tel:function(a){var b=a.value;return""!==b&&void 0!==b&&null!==b?b.match(/^(?:(?:\+?1\s*(?:[.-]\s*)?)?(?:\(\s*([2-9]1[02-9]|[2-9][02-8]1|[2-9][02-8][02-9])\s*\)|([2-9]1[02-9]|[2-9][02-8]1|[2-9][02-8][02-9]))\s*(?:[.-]\s*)?)?([2-9]1[02-9]|[2-9][02-9]1|[2-9][02-9]{2})\s*(?:[.-]\s*)?([0-9]{4})(?:\s*(?:#|x\.?|ext\.?|extension)\s*(\d+))?$/)?!0:!1:!1},checkbox:function(a){return a.checked?!0:!1},radio:function(a){return a.checked?!0:!1},textarea:function(a){var b=a.value;return""!==b&&void 0!==b&&null!==b&&null===b.match(/^\n/)?!0:!1}};var d={};return d.version="0.3.4",d.add_rule=function(b,c){for(var e="@!#$%^&*(){}[]/-+=|\"' ",f=[],g=0,h=b;g<h.length;g++)for(var i=0,j=e;i<j.length;i++)h.charAt(g)==j[i]&&f.push(j[i]);if(0!==f.length)throw"ngValidation: add_rule error, please use only alpha-numeric characters or _ (underscores) for the name. Rule [ "+b+" ] contained: [ "+f+" ]";return a.hasOwnProperty(b)&&console.warn("ngValidation: Form ["+b+"] already exists, overwriting."),a[b]=c,d},d.init=function(){for(var b="ng-validation",e=a,f=document.querySelectorAll("*["+b+"]"),g=0,h=f.length;h>g;g++)e.hasOwnProperty(f[g].getAttribute(b))||console.warn("ngValidation: Rule [ "+f[g].getAttribute(b)+" ] declared in DOM but not found in Rules object. Using defaults. Make sure to \n use [ngValidation.add_rule] to add a custom rule."),new c(f[g],e[f[g].getAttribute(b)]);return d},d}]),angular.module("ng-validation").factory("ngValidationRules",function(){var a={"default":{rule:function(){return this.failed.length>0||this.groups_failed.length>0?!1:!0}}};return a}),angular.module("ng-validation").factory("ngValidationScenarios",["ngValidationScenariosPasswordStrength","ngValidationScenariosComparator",function(a,b){var c=function(c,d,e,f){var g={password:a,comparator:b};g.hasOwnProperty(c)&&new g[c](d,e,f)};return c}]),angular.module("ng-validation").factory("ngValidationScenariosPasswordStrength",function(){var a=function(a,b,c){var d=this;this.defaults={standards:{strong:{length:12,ui:"Strong",score:28},medium:{length:8,ui:"Medium",score:15},weak:{length:5,ui:"Weak",score:8}},acceptance:"strong",ui:""},this.score,this.values={length:1,uppercase:3,number:4,special:6},this.opts=c.extend(this.defaults,b),this.password=a.querySelectorAll('input[type="password"]'),this.strength_ui=this.opts.ui?a.querySelectorAll(this.opts.ui)[0]:!1,this.root=c;for(var e=0,f=this.password.length;f>e;e++)c.bind_selectors(this.password[e],d.check_password_strength,this.password[e],d),this.check_password_strength(this.password[e])};return a.prototype.check_password_strength=function(a,b){var c=this,d=a.value,e={uppercase:0,number:0,special:0,length:0};this.score=0,e.uppercase=d.replace(/[^A-Z]/g,"").length,e.number=d.replace(/[^0-9]/g,"").length,e.special=d.replace(/[^\!|\@|\#|\$|\%|\^|\&|\*|\(|\)|\-|\_|\+|\=|\||\{|\}|\[|\]]/g,"").length,e.length=d.length;for(var f in e)this.score+=e[f]*this.values[f];this.strength_ui&&(this.scores=Object.keys(this.opts.standards).map(function(a){return c.opts.standards[a].score}).sort(function(a,b){return a-b}),this.show_strength_ui(this.scores,d)),this.score>=this.opts.standards[this.opts.acceptance].score?d.length>=this.opts.standards[this.opts.acceptance].length?this.root.epic_win(a,!1,b):this.root.epic_fail(a,!1,b):this.root.epic_fail(a,!1,b)},a.prototype.show_strength_ui=function(a,b){var c=[];for(var d in this.opts.standards)c.push(this.opts.standards[d]);c.sort(function(a,b){return a.score<b.score?-1:a.score>b.score?1:0});for(var e=0;e<c.length;e++)(0==c[e].score&&0==this.score||0==c[e].length&&0==b.length||this.score<c[e].score&&b.length<c[e].length)&&(c[e-1]||(this.strength_ui.textContent=c[e].ui)),this.score>=c[e].score&&b.length>=c[e].length&&(void 0!==c[e+1]?(this.score<c[e+1].score&&b.length<c[e+1].length||this.score>=c[e+1].score&&b.length<c[e+1].length)&&(this.strength_ui.textContent=c[e].ui):this.strength_ui.textContent=c[e].ui)},a}),angular.module("ng-validation").factory("ngValidationScenariosComparator",function(){var a=function(a,b,c){var d=this;b=b||{},this.defaults={master:!1,slaves:"",fields:!1,ui:{element:"",matched:"",unmatched:"Fields do not match."}},this.opts=c.extend(this.defaults,b),this.root=c,this.form=a,this.master=this.form.querySelectorAll(this.opts.master)[0],this.slaves=this.form.querySelectorAll(this.opts.slaves),this.message=a.querySelectorAll(this.opts.ui.element)[0],c.bind_selectors(this.master,d.compare,{},d);for(var e=0,f=this.slaves;e<f.length;e++)c.bind_selectors(f[e],d.compare,{},d)};return a.prototype.compare=function(a,b){var c=0;if(a===this.master)for(var d=0,e=this.slaves;d<e.length;d++)e[d].value!==a.value||""===e[d].value||void 0===e[d].value?(c++,this.message.textContent=this.opts.ui.unmatched,this.root.epic_fail(e[d],!1,b)):(e[d].value===a.value&&""!==e[d].value||void 0!==e[d].value)&&this.root.epic_win(e[d],!1,b);else a.value!==this.master.value||""==a.value||void 0===a.value?(c++,this.message.textContent=this.opts.ui.unmatched,this.root.epic_fail(a,!1,b)):this.root.epic_win(a,!1,b);0===c&&(this.message.textContent=this.opts.ui.matched)},a});